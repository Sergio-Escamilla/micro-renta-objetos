{"ast":null,"code":"import { catchError, finalize, forkJoin, of } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/renta.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction InboxComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function InboxComponent_div_13_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.cambiarRolHistorial(\"dueno\"));\n    });\n    i0.ɵɵtext(2, \" Due\\u00F1o \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function InboxComponent_div_13_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.cambiarRolHistorial(\"arrendatario\"));\n    });\n    i0.ɵɵtext(4, \" Arrendatario \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"active\", ctx_r1.rolHistorial === \"dueno\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"active\", ctx_r1.rolHistorial === \"arrendatario\");\n  }\n}\nfunction InboxComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \"Cargando...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InboxComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\nfunction InboxComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" No hay rentas para mostrar. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction InboxComponent_div_17_article_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"img\", 30);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const r_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", r_r4.articulo == null ? null : r_r4.articulo.imagen, i0.ɵɵsanitizeUrl)(\"alt\", (r_r4.articulo == null ? null : r_r4.articulo.titulo) || \"Art\\u00EDculo\");\n  }\n}\nfunction InboxComponent_div_17_article_1_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 31);\n  }\n}\nfunction InboxComponent_div_17_article_1_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const r_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \\u00B7 Total: $\", r_r4.total, \"\");\n  }\n}\nfunction InboxComponent_div_17_article_1_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const r_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \\u00B7 Dep\\u00F3sito: $\", r_r4.deposito, \"\");\n  }\n}\nfunction InboxComponent_div_17_article_1_div_19_div_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const st_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, st_r5.date, \"short\"));\n  }\n}\nfunction InboxComponent_div_17_article_1_div_19_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵelement(1, \"span\", 35);\n    i0.ɵɵelementStart(2, \"div\", 36);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, InboxComponent_div_17_article_1_div_19_div_1_div_4_Template, 3, 4, \"div\", 37);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const st_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"done\", st_r5.status === \"done\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(st_r5.label);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", st_r5.date);\n  }\n}\nfunction InboxComponent_div_17_article_1_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵtemplate(1, InboxComponent_div_17_article_1_div_19_div_1_Template, 5, 4, \"div\", 33);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const r_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.historialTimeline(r_r4));\n  }\n}\nfunction InboxComponent_div_17_article_1_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"span\", 40);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 41);\n    i0.ɵɵtext(4, \"sin leer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const r_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.unread(r_r4.id_renta));\n  }\n}\nfunction InboxComponent_div_17_article_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"article\", 17)(1, \"div\", 18);\n    i0.ɵɵtemplate(2, InboxComponent_div_17_article_1_ng_container_2_Template, 2, 2, \"ng-container\", 19)(3, InboxComponent_div_17_article_1_ng_template_3_Template, 1, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 20)(6, \"div\", 21)(7, \"div\", 22);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 23);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 24);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 24);\n    i0.ɵɵtext(16);\n    i0.ɵɵtemplate(17, InboxComponent_div_17_article_1_span_17_Template, 2, 1, \"span\", 25)(18, InboxComponent_div_17_article_1_span_18_Template, 2, 1, \"span\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, InboxComponent_div_17_article_1_div_19_Template, 2, 1, \"div\", 26);\n    i0.ɵɵelementStart(20, \"div\", 27);\n    i0.ɵɵtemplate(21, InboxComponent_div_17_article_1_div_21_Template, 5, 1, \"div\", 28);\n    i0.ɵɵelement(22, \"div\", 4);\n    i0.ɵɵelementStart(23, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function InboxComponent_div_17_article_1_Template_button_click_23_listener() {\n      const r_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.verResumen(r_r4.id_renta));\n    });\n    i0.ɵɵtext(24, \" Abrir \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function InboxComponent_div_17_article_1_Template_button_click_25_listener() {\n      const r_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.abrirChat(r_r4.id_renta));\n    });\n    i0.ɵɵtext(26, \" Chat \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const r_r4 = ctx.$implicit;\n    const placeholder_r6 = i0.ɵɵreference(4);\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", r_r4.articulo == null ? null : r_r4.articulo.imagen)(\"ngIfElse\", placeholder_r6);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate((r_r4.articulo == null ? null : r_r4.articulo.titulo) || \"Art\\u00EDculo\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(r_r4.estado);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind2(13, 11, r_r4.fechas == null ? null : r_r4.fechas.inicio, \"short\"), \" \\u2192 \", i0.ɵɵpipeBind2(14, 14, r_r4.fechas == null ? null : r_r4.fechas.fin, \"short\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", r_r4.modalidad || \"-\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", r_r4.total != null);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", r_r4.deposito != null);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedTab === \"historial\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.unread(r_r4.id_renta) > 0);\n  }\n}\nfunction InboxComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtemplate(1, InboxComponent_div_17_article_1_Template, 27, 17, \"article\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.items);\n  }\n}\nexport let InboxComponent = /*#__PURE__*/(() => {\n  class InboxComponent {\n    constructor(rentaService, router) {\n      this.rentaService = rentaService;\n      this.router = router;\n      this.loading = false;\n      this.errorMessage = '';\n      this.selectedTab = 'dueno_activas';\n      this.rolHistorial = 'dueno';\n      this.items = [];\n      this.unreadByRentaId = {};\n    }\n    ngOnInit() {\n      this.cargarTab('dueno_activas');\n    }\n    cargarTab(tab) {\n      this.selectedTab = tab;\n      this.errorMessage = '';\n      this.items = [];\n      this.unreadByRentaId = {};\n      let rol = 'dueno';\n      let estado = 'activas';\n      if (tab === 'dueno_activas') {\n        rol = 'dueno';\n        estado = 'activas';\n        this.rolHistorial = 'dueno';\n      } else if (tab === 'arrendatario_activas') {\n        rol = 'arrendatario';\n        estado = 'activas';\n        this.rolHistorial = 'arrendatario';\n      } else {\n        rol = this.rolHistorial;\n        estado = 'historial';\n      }\n      this.loading = true;\n      this.rentaService.misRentas(rol, estado, 1, 20).pipe(finalize(() => {\n        this.loading = false;\n      })).subscribe({\n        next: data => {\n          this.items = data?.items ?? [];\n          if (estado === 'activas') {\n            this.cargarUnreads(this.items);\n          }\n        },\n        error: err => {\n          this.errorMessage = err?.error?.message || 'No se pudo cargar la bandeja.';\n        }\n      });\n    }\n    cambiarRolHistorial(rol) {\n      this.rolHistorial = rol;\n      if (this.selectedTab === 'historial') {\n        this.cargarTab('historial');\n      }\n    }\n    cargarUnreads(items) {\n      const list = (items ?? []).slice(0, 20);\n      if (!list.length) return;\n      const calls = list.map(it => this.rentaService.chatUnreadCount(it.id_renta).pipe(catchError(() => of(0))));\n      forkJoin(calls).subscribe(counts => {\n        const map = {};\n        for (let i = 0; i < list.length; i++) {\n          map[list[i].id_renta] = Number(counts[i] ?? 0) || 0;\n        }\n        this.unreadByRentaId = map;\n      });\n    }\n    unread(idRenta) {\n      return Number(this.unreadByRentaId?.[idRenta] ?? 0) || 0;\n    }\n    verResumen(idRenta) {\n      this.router.navigate(['/rentas/resumen', idRenta]);\n    }\n    abrirChat(idRenta) {\n      this.router.navigate(['/rentas/resumen', idRenta], {\n        queryParams: {\n          chat: 1\n        },\n        fragment: 'chat'\n      });\n    }\n    miniTimeline(r) {\n      const estado = String(r?.estado || '').toLowerCase();\n      const isCancel = estado === 'cancelada' || estado === 'expirada';\n      const isIncident = estado === 'incidente';\n      const isFinal = estado === 'finalizada';\n      const order = {\n        pendiente_pago: 0,\n        pagada: 1,\n        confirmada: 2,\n        en_uso: 3,\n        devuelta: 4,\n        finalizada: 5,\n        incidente: 6,\n        cancelada: 7,\n        expirada: 7\n      };\n      const current = order[estado] ?? 0;\n      const done = key => current >= (order[key] ?? 0);\n      const lastLabel = isIncident ? 'Incidente' : isCancel ? estado === 'expirada' ? 'Expirada' : 'Cancelada' : 'Finalizada';\n      const lastKey = isIncident ? 'incidente' : isCancel ? estado : 'finalizada';\n      const lastDate = isIncident ? r.fecha_incidente ?? null : isCancel ? r.fecha_cancelacion ?? null : r.fecha_finalizacion ?? null;\n      const steps = [{\n        key: 'pagada',\n        label: 'Pagada',\n        done: done('pagada') || isFinal || isCancel || isIncident,\n        date: r.fecha_pago ?? null\n      }, {\n        key: 'confirmada',\n        label: 'Entrega',\n        done: done('confirmada') || isFinal || isCancel || isIncident,\n        date: r.fecha_entrega ?? null\n      }, {\n        key: 'en_uso',\n        label: 'En uso',\n        done: done('en_uso') || isFinal || isCancel || isIncident,\n        date: r.fecha_en_uso ?? null\n      }, {\n        key: 'devuelta',\n        label: 'Devuelta',\n        done: done('devuelta') || isFinal || isCancel || isIncident,\n        date: r.fecha_devolucion ?? null\n      }, {\n        key: lastKey,\n        label: lastLabel,\n        done: isFinal || isCancel || isIncident,\n        date: lastDate\n      }];\n      // Compacto: ocultar pasos sin completar y sin fecha si el historial es muy corto.\n      const essential = steps.filter(s => s.done || !!s.date || s.key === lastKey);\n      return essential.slice(0, 5);\n    }\n    getFecha(r, key) {\n      const tl = r?.timeline || undefined;\n      const direct = r;\n      const v = tl && tl[key] != null ? tl[key] : direct?.[key];\n      return v ?? null;\n    }\n    historialTimeline(r) {\n      const estado = String(r?.estado || '').toLowerCase();\n      const isCancel = estado === 'cancelada' || estado === 'expirada';\n      const isIncident = estado === 'incidente';\n      const isFinal = estado === 'finalizada';\n      const fechaPago = this.getFecha(r, 'fecha_pago');\n      const fechaCoord = this.getFecha(r, 'fecha_coordinacion_confirmada');\n      const fechaEntrega = this.getFecha(r, 'fecha_entrega_confirmada') || this.getFecha(r, 'fecha_entrega');\n      const fechaEnUso = this.getFecha(r, 'fecha_en_uso');\n      const fechaDev = this.getFecha(r, 'fecha_devolucion');\n      const fechaFin = this.getFecha(r, 'fecha_finalizacion') || this.getFecha(r, 'fecha_liberacion_deposito');\n      const fechaInc = this.getFecha(r, 'fecha_incidente');\n      const fechaCanc = this.getFecha(r, 'fecha_cancelacion');\n      const fechaExp = this.getFecha(r, 'fecha_expiracion');\n      const depositoLiberado = r.deposito_liberado === true;\n      const reembolsoSimulado = r.reembolso_simulado === true;\n      const out = [];\n      out.push({\n        key: 'pagada',\n        label: 'Pagada',\n        date: fechaPago,\n        status: fechaPago ? 'done' : 'pending'\n      });\n      out.push({\n        key: 'coordinacion',\n        label: 'Coordinación confirmada',\n        date: fechaCoord,\n        status: fechaCoord ? 'done' : 'pending'\n      });\n      out.push({\n        key: 'entrega',\n        label: 'Entrega confirmada',\n        date: fechaEntrega,\n        status: fechaEntrega ? 'done' : 'pending'\n      });\n      out.push({\n        key: 'en_uso',\n        label: 'En uso',\n        date: fechaEnUso,\n        status: fechaEnUso ? 'done' : 'pending'\n      });\n      out.push({\n        key: 'devuelta',\n        label: 'Devuelta',\n        date: fechaDev,\n        status: fechaDev ? 'done' : 'pending'\n      });\n      if (isFinal) {\n        out.push({\n          key: 'finalizada',\n          label: 'Finalizada',\n          date: fechaFin,\n          status: fechaFin ? 'done' : 'pending'\n        });\n        if (depositoLiberado) {\n          out.push({\n            key: 'deposito',\n            label: 'Depósito liberado ✅',\n            date: fechaFin,\n            status: 'done'\n          });\n        }\n      }\n      if (isIncident || !!fechaInc) {\n        out.push({\n          key: 'incidente',\n          label: 'Incidente',\n          date: fechaInc,\n          status: 'alert'\n        });\n        // Si hay incidente, el depósito suele quedar retenido hasta resolver\n        if (!isFinal && (r.deposito ?? r.monto_deposito ?? 0) > 0) {\n          out.push({\n            key: 'deposito_retenido',\n            label: 'Depósito retenido ⏸️',\n            date: null,\n            status: 'pending'\n          });\n        }\n      }\n      if (isCancel) {\n        const label = estado === 'expirada' ? 'Expirada' : 'Cancelada';\n        const date = estado === 'expirada' ? fechaExp : fechaCanc;\n        out.push({\n          key: estado,\n          label,\n          date,\n          status: 'done'\n        });\n        if (reembolsoSimulado) {\n          out.push({\n            key: 'reembolso',\n            label: 'Reembolso simulado',\n            date: null,\n            status: 'done'\n          });\n        }\n      }\n      // Regla UI: ocultar pasos pendientes \"no aplicables\" si hay un estado final\n      const hasFinalState = isFinal || isIncident || isCancel;\n      if (!hasFinalState) return out;\n      return out.filter(s => s.status !== 'pending' || !!s.date);\n    }\n    static {\n      this.ɵfac = function InboxComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || InboxComponent)(i0.ɵɵdirectiveInject(i1.RentaService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: InboxComponent,\n        selectors: [[\"app-inbox\"]],\n        decls: 18,\n        vars: 11,\n        consts: [[\"placeholder\", \"\"], [1, \"page-wrapper\"], [1, \"card\"], [1, \"card-header\"], [1, \"spacer\"], [1, \"tabs\"], [\"type\", \"button\", 1, \"tab\", 3, \"click\"], [\"class\", \"historial-rol\", 4, \"ngIf\"], [\"class\", \"state-message\", 4, \"ngIf\"], [\"class\", \"state-message error\", 4, \"ngIf\"], [\"class\", \"grid\", 4, \"ngIf\"], [1, \"historial-rol\"], [\"type\", \"button\", 1, \"btn-secondary\", 3, \"click\"], [1, \"state-message\"], [1, \"state-message\", \"error\"], [1, \"grid\"], [\"class\", \"item\", 4, \"ngFor\", \"ngForOf\"], [1, \"item\"], [1, \"media\"], [4, \"ngIf\", \"ngIfElse\"], [1, \"content\"], [1, \"title-row\"], [1, \"titulo\"], [1, \"badge\"], [1, \"sub\"], [4, \"ngIf\"], [\"class\", \"mini-timeline\", 4, \"ngIf\"], [1, \"actions\"], [\"class\", \"unread\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn-primary\", 3, \"click\"], [1, \"img\", 3, \"src\", \"alt\"], [1, \"img\", \"placeholder\"], [1, \"mini-timeline\"], [\"class\", \"mini-step\", 4, \"ngFor\", \"ngForOf\"], [1, \"mini-step\"], [\"aria-hidden\", \"true\", 1, \"mini-dot\"], [1, \"mini-label\"], [\"class\", \"mini-date\", 4, \"ngIf\"], [1, \"mini-date\"], [1, \"unread\"], [1, \"unread-badge\"], [1, \"unread-text\"]],\n        template: function InboxComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"section\", 2)(2, \"div\", 3)(3, \"h2\");\n            i0.ɵɵtext(4, \"Bandeja\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(5, \"div\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function InboxComponent_Template_button_click_7_listener() {\n              return ctx.cargarTab(\"dueno_activas\");\n            });\n            i0.ɵɵtext(8, \" Due\\u00F1o \\u2013 Activas \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function InboxComponent_Template_button_click_9_listener() {\n              return ctx.cargarTab(\"arrendatario_activas\");\n            });\n            i0.ɵɵtext(10, \" Arrendatario \\u2013 Activas \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function InboxComponent_Template_button_click_11_listener() {\n              return ctx.cargarTab(\"historial\");\n            });\n            i0.ɵɵtext(12, \" Historial \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(13, InboxComponent_div_13_Template, 5, 4, \"div\", 7)(14, InboxComponent_div_14_Template, 2, 0, \"div\", 8)(15, InboxComponent_div_15_Template, 2, 1, \"div\", 9)(16, InboxComponent_div_16_Template, 2, 0, \"div\", 8)(17, InboxComponent_div_17_Template, 2, 1, \"div\", 10);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵclassProp(\"active\", ctx.selectedTab === \"dueno_activas\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"active\", ctx.selectedTab === \"arrendatario_activas\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"active\", ctx.selectedTab === \"historial\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedTab === \"historial\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.errorMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.errorMessage && ctx.items.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.errorMessage && ctx.items.length > 0);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i3.DatePipe],\n        styles: [\".tabs[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}@media (max-width: 420px){.tabs[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:6px}}.historial-rol[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px}@media (max-width: 420px){.historial-rol[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:6px}}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;max-width:100%;overflow:hidden;min-width:0}@media (min-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.item[_ngcontent-%COMP%]{display:grid;grid-template-columns:76px 1fr;gap:12px;padding:12px;border:1px solid var(--border);border-radius:var(--radius-md);background:var(--surface-2);max-width:100%;overflow:hidden;min-width:0}@media (max-width: 420px){.item[_ngcontent-%COMP%]{grid-template-columns:1fr}}.media[_ngcontent-%COMP%]{display:flex;min-width:0}@media (max-width: 420px){.media[_ngcontent-%COMP%]{justify-content:flex-start}}.img[_ngcontent-%COMP%]{width:76px;height:76px;border-radius:10px;object-fit:cover;border:1px solid var(--border)}@media (max-width: 420px){.img[_ngcontent-%COMP%]{width:100%;height:180px;border-radius:var(--radius-md)}}.placeholder[_ngcontent-%COMP%]{background:var(--surface-3)}.title-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;justify-content:space-between;min-width:0}@media (max-width: 420px){.title-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-start}}.titulo[_ngcontent-%COMP%]{font-weight:700;min-width:0;max-width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;white-space:normal}.badge[_ngcontent-%COMP%]{flex:0 0 auto}.sub[_ngcontent-%COMP%]{opacity:.85;font-size:14px;min-width:0;max-width:100%;overflow:hidden}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:10px;min-width:0;max-width:100%}.mini-timeline[_ngcontent-%COMP%]{margin-top:10px;display:grid;gap:6px;min-width:0}.mini-step[_ngcontent-%COMP%]{display:grid;grid-template-columns:10px 1fr auto;align-items:center;gap:8px;min-width:0}.mini-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:999px;background:#0f172a2e;border:1px solid rgba(15,23,42,.2)}.mini-dot.done[_ngcontent-%COMP%]{background:#14b8a638;border-color:#14b8a659}.mini-label[_ngcontent-%COMP%]{font-size:13px;opacity:.9;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mini-date[_ngcontent-%COMP%]{font-size:12px;opacity:.75;white-space:nowrap}@media (max-width: 420px){.actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.actions[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{display:none}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.unread[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.unread-badge[_ngcontent-%COMP%]{display:inline-flex;min-width:22px;height:22px;padding:0 6px;align-items:center;justify-content:center;border-radius:999px;border:1px solid rgba(20,184,166,.3);background:#14b8a62e;font-size:12px;font-weight:800;color:#05201f}.unread-text[_ngcontent-%COMP%]{font-size:12px;opacity:.85}\"]\n      });\n    }\n  }\n  return InboxComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}